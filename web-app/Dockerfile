FROM node:21-alpine
WORKDIR /app

# Pass API URL as a build argument
ARG API_URL
ENV NEXT_PUBLIC_API_URL=$API_URL

ARG INFURA_API_KEY
ENV INFURA_API_KEY=$INFURA_API_KEY

ARG MAGICBELL_API_KEY
ENV MAGICBELL_API_KEY=$MAGICBELL_API_KEY

COPY . .
RUN yarn
RUN yarn build

ENTRYPOINT yarn start

